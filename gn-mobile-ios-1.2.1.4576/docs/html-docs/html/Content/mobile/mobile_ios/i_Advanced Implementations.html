<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Platform Guidelines| iOS">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Advanced Implementations</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/BookStyles.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../index.html#mobile/mobile_ios/i_Advanced Implementations.html">Open topic with navigation</a>
        </p>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><span class="MCBreadcrumbsSelf">Platform Guidelines</span><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="MobileiOSImplementationGuide.html"> iOS</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Advanced Implementations</span>
        </div>
        <h1>Advanced Implementations</h1>
        <h2>Application Transport Security</h2>
        <p><a name="kanchor226"></a>If your application makes an unsecured connection, an ATS error message will appear in the iOS 9.0 log. The mobile sample app does not make a direct connection using <code>NSURLConnection</code> anymore. The <code> GnAssetFetch</code> class is now used fetching coverart and artist images.</p>
        <p>If you still want to use an unsecured connection without using <code>GnAssetFetch</code>, add the key below to <code><a name="kanchor227"></a>GN_Music_SDK_iOS-Info.plist</code> to avoid iOS throwing an error.</p><pre xml:space="preserve">
&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;
&lt;dict&gt;
    &lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt;&lt;true/&gt;
&lt;/dict&gt;</pre>
        <p><b>From Apple's ATS document</b>:
        </p>
        <p>App Transport Security</p>
        <p>App Transport Security (ATS) enforces best practices in the secure connections between an app and its back end. ATS prevents accidental disclosure, provides secure default behavior, and is easy to adopt; it is also on by default in iOS 9 and OS X v10.11. You should adopt ATS as soon as possible, regardless of whether you’re creating a new app or updating an existing one.</p>
        <p>If you’re developing a new app, you should use HTTPS exclusively. If you have an existing app, you should use HTTPS as much as you can right now, and create a plan for migrating the rest of your app as soon as possible. In addition, your communication through higher-level APIs needs to be encrypted using <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">TLS<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>See Three-Line-Solution.</span></a> version 1.2 with forward secrecy. If you try to make a connection that doesn't follow this requirement, an error is thrown. If your app needs to make a request to an insecure domain, you have to specify this domain in your app's Info.plist file.</p>
        <h2><a name="kanchor228"></a>User History</h2>
        <p>The sample application includes a user history feature. It stores the results of certain operations and allows the user to view them. When viewed, the history record displays the recognized music, including cover art and the location of the user when the operation occurred.</p>
        <p><a name="kanchor229"></a>The feature uses a local SQLite database to store the user history information.</p>
        <h3><a name="kanchor230"></a>Adding Entries</h3>
        <p>When results for an appropriate operation are received, an entry is added to the database. Only results from the following operations are stored:</p>
        <ul>
            <li value="1">Recognizing music from the microphone (IDNow)</li>
            <li value="2"><a name="kanchor231"></a>Recognizing music from a PCM sample (AlbumID)</li>
            <li value="3">Searching by fingerprint</li>
        </ul>
        <p>The process of adding an entry to the database is included in the search operation classes. This allows it to be called in the thread that invokes callbacks for any of the operations mentioned above. Before adding an entry, a check is made to ensure the database exists, and if it doesn’t, it is created.</p>
        <p>Each record in the database contains a unique ID. The ID is generated by incrementing the ID of the last entry added to the database. IDs are later used by the mechanism that prunes the database, keeping it within a predetermined size.</p>
        <p>A single synchronized method is used to add an entry to the database. Synchronization is essential to guarantee the integrity of the mechanism used to generate unique IDs and the procedure used to create a database if it doesn’t already exist.</p>
        <h3><a name="kanchor232"></a>Limiting Database Size</h3>
        <p>The size of the database cannot be allowed to grow indefinitely. After adding an entry to the database, its size is checked to determine if it exceeds a predefined limit of 1000 entries. If there are more than 1000 entries, the oldest entries in the database are deleted, bringing the size back to the predetermined limit.</p>
        <h3>Recalling Entries</h3>
        <p>The sample application exports a mutable copy of the entries in the database in an array. The data contained within the export can then be used to populate a UI that allows the user to navigate the entries. For large databases, a paging mechanism can be used to reduce the number of entries exported into memory at any one time.</p>
        <p>&#160;</p>
        <p>&#160;</p>
        <p>&#160;</p>
        <p>&#160;</p>
        <p>&#160;</p>
        <p>&#160;</p>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><span class="MCBreadcrumbsSelf">Platform Guidelines</span><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="MobileiOSImplementationGuide.html"> iOS</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Advanced Implementations</span>
        </div>
        <p class="onlineFooter"><a name="kanchor233"></a>© 2000 to present. Gracenote, Inc. All rights reserved.</p>
        <p><a href="mailto:doc_feedback@gracenote.com?subject=Gracenote Documentation Feedback" target="_blank" title="Send comments about this topic to Gracenote Technical Publications." alt="Send comments about this topic to Gracenote Technical Publications.">How can we improve this documentation?</a>
        </p>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkBottom"><a href="../../../index.html#mobile/mobile_ios/i_Advanced Implementations.html">Open topic with navigation</a>
        </p>
    </body>
</html>